{"ast":null,"code":"import _regeneratorRuntime from\"/root/book-store/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/root/book-store/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/root/book-store/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Books=function Books(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];useEffect(function(){var fetchAllBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://54.185.200.109/api/books\");case 3:res=_context.sent;setBooks(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchAllBooks(){return _ref.apply(this,arguments);};}();fetchAllBooks();},[]);console.log(books);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"http://54.185.200.109/api/books/\".concat(id));case 3:window.location.reload();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Blossoms Book Shop\"}),/*#__PURE__*/_jsx(\"div\",{className:\"books\",children:books.map(function(book){return/*#__PURE__*/_jsxs(\"div\",{className:\"book\",children:[/*#__PURE__*/_jsx(\"h2\",{children:book.title}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"by \",/*#__PURE__*/_jsx(\"i\",{children:book.author}),\" \"]}),/*#__PURE__*/_jsx(\"p\",{children:book.desc}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",book.price]}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:function onClick(){return handleDelete(book.id);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"update\",children:/*#__PURE__*/_jsx(Link,{to:\"/update/\".concat(book.id),style:{color:\"inherit\",textDecoration:\"none\"},children:\"Update\"})})]},book.id);})}),/*#__PURE__*/_jsx(\"button\",{className:\"addHome\",children:/*#__PURE__*/_jsx(Link,{to:\"/add\",style:{color:\"inherit\",textDecoration:\"none\"},children:\"Add new book\"})})]});};export default Books;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","Books","books","setBooks","fetchAllBooks","get","res","data","console","log","handleDelete","id","delete","window","location","reload","map","book","title","author","desc","price","color","textDecoration"],"sources":["/root/book-store/client/src/pages/Books.jsx"],"sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nconst Books = () => {\n  const [books, setBooks] = useState([]);\n\n  useEffect(() => {\n    const fetchAllBooks = async () => {\n      try {\n        const res = await axios.get(\"http://54.185.200.109/api/books\");\n        setBooks(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchAllBooks();\n  }, []);\n\n  console.log(books);\n\n  const handleDelete = async (id) => {\n    try {\n      await axios.delete(`http://54.185.200.109/api/books/${id}`);\n      window.location.reload()\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Blossoms Book Shop</h1>\n      <div className=\"books\">\n        {books.map((book) => (\n          <div key={book.id} className=\"book\">\n            {/* <img src={book.cover} alt=\"\" /> */}\n            <h2>{book.title}</h2>\n            <h4>by <i>{book.author}</i> </h4>\n            <p>{book.desc}</p>\n            <span>${book.price}</span>\n            <button className=\"delete\" onClick={() => handleDelete(book.id)}>Delete</button>\n            <button className=\"update\">\n              <Link\n                to={`/update/${book.id}`}\n                style={{ color: \"inherit\", textDecoration: \"none\" }}\n              >\n                Update\n              </Link>\n            </button>\n          </div>\n        ))}\n      </div>\n\n      <button className=\"addHome\">\n        <Link to=\"/add\" style={{ color: \"inherit\", textDecoration: \"none\" }}>\n          Add new book\n        </Link>\n      </button>\n    </div>\n  );\n};\n\nexport default Books;\n"],"mappings":"uVAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAClB,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eAEAN,SAAS,CAAC,UAAM,CACd,GAAMO,cAAa,4FAAG,mLAEAL,MAAK,CAACM,GAAN,CAAU,iCAAV,CAFA,QAEZC,GAFY,eAGlBH,QAAQ,CAACG,GAAG,CAACC,IAAL,CAAR,CAHkB,+EAKlBC,OAAO,CAACC,GAAR,cALkB,oEAAH,kBAAbL,cAAa,0CAAnB,CAQAA,aAAa,GACd,CAVQ,CAUN,EAVM,CAAT,CAYAI,OAAO,CAACC,GAAR,CAAYP,KAAZ,EAEA,GAAMQ,aAAY,6FAAG,kBAAOC,EAAP,gKAEXZ,MAAK,CAACa,MAAN,2CAAgDD,EAAhD,EAFW,QAGjBE,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAHiB,kFAKjBP,OAAO,CAACC,GAAR,eALiB,qEAAH,kBAAZC,aAAY,6CAAlB,CASA,mBACE,oCACE,0CADF,cAEE,YAAK,SAAS,CAAC,OAAf,UACGR,KAAK,CAACc,GAAN,CAAU,SAACC,IAAD,qBACT,aAAmB,SAAS,CAAC,MAA7B,wBAEE,oBAAKA,IAAI,CAACC,KAAV,EAFF,cAGE,yCAAO,mBAAID,IAAI,CAACE,MAAT,EAAP,OAHF,cAIE,mBAAIF,IAAI,CAACG,IAAT,EAJF,cAKE,4BAAQH,IAAI,CAACI,KAAb,GALF,cAME,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAE,yBAAMX,aAAY,CAACO,IAAI,CAACN,EAAN,CAAlB,EAApC,oBANF,cAOE,eAAQ,SAAS,CAAC,QAAlB,uBACE,KAAC,IAAD,EACE,EAAE,mBAAaM,IAAI,CAACN,EAAlB,CADJ,CAEE,KAAK,CAAE,CAAEW,KAAK,CAAE,SAAT,CAAoBC,cAAc,CAAE,MAApC,CAFT,oBADF,EAPF,GAAUN,IAAI,CAACN,EAAf,CADS,EAAV,CADH,EAFF,cAuBE,eAAQ,SAAS,CAAC,SAAlB,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,MAAT,CAAgB,KAAK,CAAE,CAAEW,KAAK,CAAE,SAAT,CAAoBC,cAAc,CAAE,MAApC,CAAvB,0BADF,EAvBF,GADF,CA+BD,CAzDD,CA2DA,cAAetB,MAAf"},"metadata":{},"sourceType":"module"}